{"version":3,"sources":["../../src/graphql/resolvers.js"],"names":["accounts","user","email","gender","resolvers","Query","music","Mutation","addAccount","parent","data","context","info","profileImage","createReadStream","stream","url","userInfo","console","log","loginAccount","password","addMusic","musicData","path","musicInfo","addComment","commentData","_id","newComment","filter","update","$push","comments"],"mappings":"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","sourcesContent":["import {\n  addAccountAction,\n  updateAccountAction,\n  loginAccountAction,\n  showAccounts\n} from './actions/accountActions';\n\nimport {\n  addMusicAction,\n  showMusic\n} from './actions/musicActions';\n\nimport { addCommentAction } from './actions/commentActions'\n\nimport {storeUpload} from './actions/utils/uploader'\n\nconst accounts = [\n    {\n    user: 'lrodriguez',\n    email: 'lrodriguez@sysvirtuales.com',\n    gender: 'H'\n    },\n    {    \n    user: 'anerenee',\n    email: 'anarenee@sysvirtuales.com',\n    gender: 'M'\n    },\n    {\n    user: 'develop',\n    email: 'development@sysvirtuales.com',\n    gender: 'H'\n    },\n    {\n    user: 'marketing',\n    email: 'marketing@sysvirtuales.com',\n    gender: 'H'\n    }\n]\n\nconst resolvers = {\n    Query: {\n      accounts: () => showAccounts(),\n      music: () => showMusic(),\n    },\n    Mutation: {\n      addAccount: async (parent, data, context, info) => {\n        try {\n          // sube el archivo\n          const { createReadStream } = await data.data.profileImage\n          const stream = createReadStream()\n          const { url } = await storeUpload(stream, 'image')\n\n          // registra usario\n          const userInfo = {\n            ...data.data,\n            profileImage: url,\n          }\n\n          return await addAccountAction(userInfo)          \n        } catch (error){\n          console.log(\"TCL: error\", error)\n        }\n      },\n      loginAccount: async (parent, data, context, info) => {\n        try {\n          const { email, password } = data\n          return await loginAccountAction(email, password)          \n        } catch (error) {\n          console.log(\"TCL: error\", error)\n        }\n      },\n      addMusic: async (parent, data, context, info) => {\n        try {\n          // sube el archivo\n          const { musicData } = data;\n          const { createReadStream } = await musicData.path\n          const stream = createReadStream()\n          const { url } = await storeUpload(stream, 'video')\n\n          const musicInfo = {\n            ...musicData,\n            path: url,\n          }\n          return await addMusicAction(musicInfo)\n        } catch (error) {\n          console.log(\"TCL: addMusic error\", error)\n        }\n      },\n      addComment: async (parent, data, context, info) => {\n        try {\n          const { commentData } = data\n          const { user } = context\n          const newComment = await addCommentAction(commentData, user._id)\n          const filter = { _id: user._id }\n          const update = { $push: { comments: newComment._id } }\n          await updateAccountAction(filter, update)\n          return newComment\n        } catch (error) {\n          console.log(\"TCL: addComment error\", error)\n        }\n      }\n    }\n  };\n\nexport default resolvers;"],"file":"resolvers.js"}