{"version":3,"sources":["../../../../src/graphql/actions/utils/uploader.js"],"names":["storeUpload","stream","resourceType","cloudinary","config","cloud_name","process","env","CD_CLOUD_NAME","api_key","CD_API_KEY","api_secret","CD_API_SECRET","Promise","resolve","reject","buffer","v2","uploader","upload_stream","resource_type","err","result","pipe"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA,IAAMA,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG,iBAAOC,MAAP,EAAeC,YAAf;AAAA;AAAA;AAAA;AAAA;AAChBC,mCAAWC,MAAX,CAAkB;AACdC,cAAAA,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,aADV;AAEdC,cAAAA,OAAO,EAAEH,OAAO,CAACC,GAAR,CAAYG,UAFP;AAGdC,cAAAA,UAAU,EAAEL,OAAO,CAACC,GAAR,CAAYK;AAHV,aAAlB;;AADgB,6CAOT,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,kBAAMC,MAAM,GAAGb,uBAAWc,EAAX,CAAcC,QAAd,CAAuBC,aAAvB,CACb;AAAEC,gBAAAA,aAAa,EAAElB;AAAjB,eADa,EAEb,UAACmB,GAAD,EAAMC,MAAN,EAAiB;AACf,oBAAID,GAAJ,EAASN,MAAM,CAACM,GAAD,CAAN;AACTP,gBAAAA,OAAO,CAACQ,MAAD,CAAP;AACD,eALY,CAAf;;AAOArB,cAAAA,MAAM,CAACsB,IAAP,CAAYP,MAAZ;AACH,aATM,CAPS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAXhB,WAAW;AAAA;AAAA;AAAA,GAAjB","sourcesContent":["import cloudinary from 'cloudinary'\n\nconst storeUpload = async (stream, resourceType) => {\n    cloudinary.config({\n        cloud_name: process.env.CD_CLOUD_NAME,\n        api_key: process.env.CD_API_KEY,\n        api_secret: process.env.CD_API_SECRET\n    })\n\n    return new Promise((resolve, reject) => {\n        const buffer = cloudinary.v2.uploader.upload_stream (\n          { resource_type: resourceType },\n          (err, result) => {\n            if (err) reject(err);\n            resolve(result);\n          }\n        )\n        stream.pipe(buffer)\n    })\n}\n\nexport {\n    storeUpload\n}"],"file":"uploader.js"}